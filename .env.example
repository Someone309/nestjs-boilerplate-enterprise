# ============================================
# NestJS Boilerplate Environment Configuration
# ============================================
# Copy this file to .env and fill in the values
# NEVER commit .env file to version control

# ============================================
# Application
# ============================================
NODE_ENV=development
APP_NAME=nestjs-boilerplate
APP_VERSION=1.0.0
APP_HOST=0.0.0.0
APP_PORT=3000
APP_DEBUG=false

# API Settings
API_PREFIX=api
API_VERSION=v1

# CORS (comma-separated origins)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# Request Limits
JSON_BODY_LIMIT=1mb
URL_ENCODED_LIMIT=1mb

# ============================================
# Database Configuration
# ============================================
# DB_TYPE: postgres | mysql | sqlite | mongodb
# DB_ORM: typeorm | prisma (for SQL databases, default: typeorm)
#
# Combinations:
# - postgres + typeorm (default)
# - postgres + prisma
# - mysql + typeorm
# - mysql + prisma
# - sqlite + typeorm
# - mongodb (always uses Mongoose)
# ============================================

DB_TYPE=postgres
DB_ORM=typeorm

# SQL Database Connection (PostgreSQL/MySQL)
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=postgres
DB_DATABASE=nestjs_boilerplate

# SSL Configuration
DB_SSL=false
# DB_SSL_REJECT_UNAUTHORIZED=true

# Connection Pool
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000

# Query Timeouts (ms)
DB_STATEMENT_TIMEOUT=30000
DB_LOCK_TIMEOUT=10000
DB_IDLE_IN_TRANSACTION_TIMEOUT=60000

# ORM Settings
DB_SYNCHRONIZE=true
DB_LOGGING=false
DB_MIGRATIONS_RUN=false

# ============================================
# MongoDB Configuration (if DB_TYPE=mongodb)
# ============================================
# MONGODB_URI=mongodb://localhost:27017/nestjs_boilerplate
# MONGODB_MAX_POOL_SIZE=10
# MONGODB_MIN_POOL_SIZE=2

# ============================================
# Prisma Configuration (if DB_ORM=prisma)
# ============================================
# Prisma uses DATABASE_URL from schema.prisma
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/nestjs_boilerplate

# ============================================
# JWT Authentication
# ============================================
# Algorithm: HS256 (development), RS256/ES256 (production)
# HS256 = symmetric (uses JWT_SECRET)
# RS256/ES256 = asymmetric (uses JWT_PRIVATE_KEY + JWT_PUBLIC_KEY)
JWT_ALGORITHM=HS256

# For HS256 (symmetric - development/single service)
JWT_SECRET=your-super-secret-key-change-in-production-min-32-chars

# For RS256/ES256 (asymmetric - production/multi-service)
# Generate RSA keys: openssl genrsa -out private.pem 4096
#                    openssl rsa -in private.pem -pubout -out public.pem
# Then set (use \n for newlines or base64 encode):
# JWT_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\n...\n-----END RSA PRIVATE KEY-----"
# JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----"

# Token Expiration
JWT_ACCESS_TOKEN_EXPIRES_IN=15m
JWT_REFRESH_TOKEN_EXPIRES_IN=7d

# Token Claims
JWT_ISSUER=auth.example.com
JWT_AUDIENCE=api.example.com

# Blacklist
JWT_BLACKLIST_ENABLED=true

# ============================================
# Redis / Cache
# ============================================
# Cache driver: memory | redis
# Use 'memory' for development/single-instance
# Use 'redis' for production/multi-instance
CACHE_DRIVER=memory

REDIS_HOST=localhost
REDIS_PORT=6379
# REDIS_PASSWORD=
REDIS_DB=0
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_KEY_PREFIX=app:

# Cache TTLs (seconds)
CACHE_DEFAULT_TTL=300
CACHE_TTL_USER_SESSION=86400
CACHE_TTL_USER_PROFILE=900
CACHE_TTL_CONFIGURATION=300
CACHE_TTL_PUBLIC_LISTINGS=3600
CACHE_TTL_SEARCH_RESULTS=300

# ============================================
# Rate Limiting
# ============================================
THROTTLE_GLOBAL_TTL=60000
THROTTLE_GLOBAL_LIMIT=100

# Tier Limits (requests per minute)
THROTTLE_ANONYMOUS_LIMIT=30
THROTTLE_AUTHENTICATED_LIMIT=100
THROTTLE_PREMIUM_LIMIT=500
THROTTLE_INTERNAL_LIMIT=1000

# Storage: memory | redis (use redis for multi-instance)
THROTTLE_STORAGE=memory
THROTTLE_SKIP_LOCALHOST=false

# ============================================
# Logging
# ============================================
LOG_LEVEL=info
LOG_FORMAT=json

# ============================================
# Health Check
# ============================================
HEALTH_CHECK_LIVENESS_INTERVAL=10000
HEALTH_CHECK_READINESS_INTERVAL=5000
HEALTH_CHECK_STARTUP_TIMEOUT=30000

# ============================================
# Internationalization (i18n)
# ============================================
I18N_DEFAULT_LANGUAGE=en
I18N_FALLBACK_LANGUAGE=en
# Comma-separated list of supported languages
I18N_SUPPORTED_LANGUAGES=en,es
# Path to translation files (relative to project root)
# I18N_TRANSLATIONS_PATH=src/infrastructure/i18n/translations

# ============================================
# External Services (Optional)
# ============================================
# SMTP_HOST=
# SMTP_PORT=587
# SMTP_USER=
# SMTP_PASS=
# SMTP_FROM=noreply@example.com

# AWS S3 (File Storage)
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_S3_BUCKET=

# Sentry (Error Tracking)
# SENTRY_DSN=
